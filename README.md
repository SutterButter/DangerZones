# Danger Zones

## Overview

Every year, hundreds of thousands of people are injured when they fail to see, or see without actually seeing, while driving. If these people were simply paying better attention to the road and task at hand, they could prevent their accident alltogether. For State Farm's Hackday 2017, I wanted to devise a way to help prevent people from being involved in this type of accident. To do this my hack needed to be easily accessible to most people, be hassle free, and somehow prevent lack of seeing accidents. After some though I settled on designing an iOS navigation app that would balance driving routes between safety and speed and warn users of upcoming dangerous portions of road so that they could be more alert when in a potentially dangerous situation. 

## The Data

In order to make a navigationa app that warns of dangerous portions of road, I first had to identify the dangerous road sections. And to do that, I needed to figure out where people consistently crash. I decided to focus this prototype on Ohio as I would already know the dangerous intersections and roads because I grew up there. Specifically I focused on Stark County Ohio. 
As it turns out, the Ohio Department of Public Safety puts out car crash data on a daily basis. Their website allows you to select the time frame and for what parts of Ohio you want the crash data. The data goes back years and it is all available for download. The download comes as a file containing 4 text file and a readme. Each of these 4 text files contains different data, but it is all stored the same way. The data has no delimiters, but ther is a guide on the website that tells what data is at what indexes. The website is mostly accurate with only a few minor discrepencies. 
The first text file contains general crash data including the gps location of the crash, the date of the crash, what the road conditions were like, how severe the crash was, and even an exact recounting of the crash (Encoded). 
The second text file contains Ohio department of transportion crash data which is just a very brief simplified version of the crash data. 
The third text file contains non-identiable data on the people involved in the car crash. 
The fourth text file contains data on the units involved in the crash such as the make and model of the car.

I settled on using the general crash data to create the map of dangerous portions of road because it contained GPS data and I could use the crash severity to determine how dangerous every area was. I took this data and ran it through a python program that ran through the crash data and pulled out each of the fields into variables. The next step was to take the crash locations and start to figure out where there seemed to be heavy amounts of crashes in a small area. The obvious solution to doing this was to use a clustering algorithm. I settled on using SciKitLearn's DBSCAN algorithm because the data determins the clusters as opposed to something like a k-means clustering algorithm where you have to specify the number of clusters. This DBSCAN algorithm took in a maximum distance beteween points and the minimum number of points to be considered a cluster, I used 40 meters and 10 points minimum per cluster. Once it figured out where the clustered points were, the python program went through and averaged the locations of the crashes for each cluster to get a sort of center point. While doing this the program also extracted the crash severities and compiled them to make an overall danger score for each of the clusters. This danger score is a function of the crash severities (only property damage, injuries, or fatal) and the amount of crashes per cluster. Once this was done I took this data and imported it into xcode so that I could run potential routes against it. If given time in the future I plan to put the data into firebase so that it could scale to cover the whole United States. I would then query it so that I only get back certain clusters to check against, reducing run time.

## The Routes
Due to legal constraints I was forced to use Apple's MapKit in order to do the acutal routing between locations that a navigation app is required to do. MapKit allows you to request a route based on a start point and a destination. This request can even specify that you want to find alternative routes as well. 
This meant that I did not have access to functions such as isPointOnRoute() which checks if a specific point is on the route. 
